#' @title Function \code{write_example_parallelRemake}
#' @description Write the files \code{code.R} and \code{remake.yml} for the example.
#' @export
write_example_parallelRemake = function(){
  dir = system.file("example", package = "parallelRemake")
  for(file in list.files(dir)){
    path = system.file("example", file, package = "parallelRemake")
    if (!file.exists(path)) stop("File ", file, 
      " is missing from installed package parallelRemake.", call.=FALSE)
    contents = readLines(path)
    write(contents, file)
  }
}

#' @title Function \code{setup_example_parallelRemake}
#' @description Write the files \code{code.R} and \code{remake.yml} for the example. 
#' and then write the Makefile.
#' @export
setup_example_parallelRemake = function(){
  write_example_parallelRemake()
  write_makefile()
}

#' @title Function \code{run_example_parallelRemake}
#' @description Run the whole example: generate the \code{remake} file,
#' then generate the master \code{Makefile} to run the targets in parallel,
#' and then run \code{make} to run the workflow in parallel.
#' @export
run_example_parallelRemake = function(){
  setup_example_parallelRemake()
  system("make -j 4")
}

#' @title Function \code{clean_example_parallelRemake}
#' @description Clean up files generated by the package example.
#' @export
clean_example_parallelRemake = function(){
  system("make clean")
  unlink(c("code.R", "remake.yml", "Makefile"))
}

